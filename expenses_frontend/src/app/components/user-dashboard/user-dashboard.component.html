<div class="dashboard-container">
  <div class="dashboard-header">
    <h2><i class="bi bi-people-fill"></i> My Groups</h2>
    <button 
      class="btn btn-secondary refresh-btn"
      (click)="refreshGroups()"
      [disabled]="isLoading"
    >
      <i class="bi bi-arrow-clockwise" *ngIf="!isLoading"></i>
      <i class="bi bi-hourglass-split spinning" *ngIf="isLoading"></i>
      <span *ngIf="!isLoading">Refresh</span>
      <span *ngIf="isLoading">Loading...</span>
    </button>
  </div>

  <div class="welcome-message" *ngIf="currentUser">
    <i class="bi bi-person-heart welcome-icon"></i>
    <p>Welcome back, <strong>{{ currentUser.username }}</strong>!</p>
    <p *ngIf="groups.length === 0 && !isLoading">
      <i class="bi bi-info-circle"></i> You're not part of any groups yet. Contact your admin to be added to a group.
    </p>
  </div>

  <div class="loading-spinner" *ngIf="isLoading">
    <i class="bi bi-hourglass-split spinning large-icon"></i>
    <p>Loading your groups...</p>
  </div>

  <div class="error-message" *ngIf="errorMessage">
    <i class="bi bi-exclamation-triangle-fill"></i>
    {{ errorMessage }}
    <button class="btn btn-outline retry-btn" (click)="loadGroups()">
      <i class="bi bi-arrow-repeat"></i> Retry
    </button>
  </div>

  <div class="groups-grid" *ngIf="!isLoading && groups.length > 0">
    <div 
      *ngFor="let group of groups" 
      class="group-card"
      (click)="viewGroup(group.id)"
    >
      <div class="group-header">
        <h3><i class="bi bi-people"></i> {{ group.name }}</h3>
        <div class="group-meta">
          <span class="created-date">
            <i class="bi bi-calendar3"></i> Created {{ formatDate(group.created_at) }}
          </span>
        </div>
      </div>
      
      <div class="group-actions">
        <button class="btn btn-primary view-btn">
          <i class="bi bi-eye"></i> View Details
        </button>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="!isLoading && groups.length === 0 && !errorMessage">
    <i class="bi bi-collection empty-icon"></i>
    <h3>No Groups Yet</h3>
    <p><i class="bi bi-info-circle"></i> You haven't been added to any expense groups.</p>
    <p><i class="bi bi-person-check"></i> Contact your administrator to join groups and start tracking shared expenses.</p>
  </div>
</div>
