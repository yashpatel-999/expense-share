import{b as I,c as k,d as z,e as V,f as B,g as F,n as N,o as R,p as T}from"./chunk-P7CQ5TDW.js";import{d as D}from"./chunk-4GET5A6J.js";import{Fa as c,Ga as b,Ha as n,Ia as o,Ja as r,Ka as v,La as O,Ma as y,Na as x,Oa as l,Qa as w,Sa as _,Ta as C,Ua as M,W as p,X as d,jb as S,mb as L,na as a,ra as f,tb as E,va as P,za as u}from"./chunk-DRJN4SHT.js";function j(i,t){if(i&1&&(n(0,"div",23),r(1,"i",24),l(2),o()),i&2){let s=y();a(2),w(" ",s.errorMessage," ")}}function W(i,t){i&1&&r(0,"i",25)}function q(i,t){i&1&&r(0,"i",26)}function Y(i,t){i&1&&(n(0,"span"),l(1,"Sign In"),o())}function G(i,t){i&1&&(n(0,"span"),l(1,"Signing In..."),o())}var A=class i{constructor(t,s){this.apiService=t;this.router=s;this.apiService.isLoggedIn()&&this.redirectBasedOnRole()}loginData={email:"",password:""};isLoading=!1;errorMessage="";onSubmit(){if(!this.loginData.email||!this.loginData.password){this.errorMessage="Please fill in all fields";return}this.isLoading=!0,this.errorMessage="",this.apiService.login(this.loginData).subscribe({next:t=>{this.isLoading=!1,this.redirectBasedOnRole()},error:t=>{this.isLoading=!1,this.errorMessage=t.error?.message||"Login failed. Please try again.",console.error("Login error:",t)}})}redirectBasedOnRole(){this.apiService.isAdmin()?this.router.navigate(["/admin"]):this.router.navigate(["/dashboard"])}static \u0275fac=function(s){return new(s||i)(f(E),f(D))};static \u0275cmp=P({type:i,selectors:[["app-login"]],decls:33,vars:12,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"bi","bi-wallet2","app-icon"],[1,"bi","bi-receipt-cutoff"],[1,"login-subtitle"],[1,"bi","bi-person-circle"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],[1,"input-group"],[1,"bi","bi-envelope","input-icon"],["type","email","name","email","placeholder","Email","required","","email","",1,"form-input",3,"ngModelChange","ngModel"],[1,"bi","bi-lock","input-icon"],["type","password","name","password","placeholder","Password","required","",1,"form-input",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-primary","login-btn",3,"disabled"],["class","bi bi-box-arrow-in-right",4,"ngIf"],["class","bi bi-hourglass-split spinning",4,"ngIf"],[4,"ngIf"],[1,"login-help"],[1,"bi","bi-info-circle"],[1,"bi","bi-shield-check"],[1,"error-message"],[1,"bi","bi-exclamation-triangle-fill"],[1,"bi","bi-box-arrow-in-right"],[1,"bi","bi-hourglass-split","spinning"]],template:function(s,e){if(s&1){let m=v();n(0,"div",1)(1,"div",2)(2,"div",3),r(3,"i",4),n(4,"h2"),r(5,"i",5),l(6," Expense Sharing App"),o(),n(7,"p",6),r(8,"i",7),l(9," Sign in to your account "),o()(),n(10,"form",8,0),O("ngSubmit",function(){return p(m),d(e.onSubmit())}),n(12,"div",9)(13,"div",10),r(14,"i",11),n(15,"input",12),M("ngModelChange",function(g){return p(m),C(e.loginData.email,g)||(e.loginData.email=g),d(g)}),o()()(),n(16,"div",9)(17,"div",10),r(18,"i",13),n(19,"input",14),M("ngModelChange",function(g){return p(m),C(e.loginData.password,g)||(e.loginData.password=g),d(g)}),o()()(),u(20,j,3,1,"div",15),n(21,"button",16),u(22,W,1,0,"i",17)(23,q,1,0,"i",18)(24,Y,2,0,"span",19)(25,G,2,0,"span",19),o()(),n(26,"div",20)(27,"p"),r(28,"i",21),l(29," Contact your administrator for account access"),o(),n(30,"p"),r(31,"i",22),l(32," Your data is secure and encrypted"),o()()()()}if(s&2){let m=x(11);a(15),b("invalid",m.submitted&&!e.loginData.email),_("ngModel",e.loginData.email),a(4),b("invalid",m.submitted&&!e.loginData.password),_("ngModel",e.loginData.password),a(),c("ngIf",e.errorMessage),a(),c("disabled",e.isLoading),a(),c("ngIf",!e.isLoading),a(),c("ngIf",e.isLoading),a(),c("ngIf",!e.isLoading),a(),c("ngIf",e.isLoading)}},dependencies:[L,S,T,F,I,k,z,N,R,B,V],styles:["[_nghost-%COMP%]{--icon-purple: #B19CD9;--icon-blue: #87CEEB;--icon-green: #98D9A4;--icon-pink: #F5A3C7;--icon-yellow: #F0E68C;--icon-orange: #FDBCB4;--icon-mint: #96D3CE;--icon-lavender: #D8BFD8}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:1rem;background:#f8f9fa}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2.5rem;border-radius:12px;box-shadow:0 4px 12px #0000001a;width:100%;max-width:420px;text-align:center;border:1px solid #e9ecef}.login-header[_ngcontent-%COMP%]{margin-bottom:2rem}.app-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--icon-purple);margin-bottom:1rem;display:block}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#495057;font-size:1.75rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--icon-blue)}.login-subtitle[_ngcontent-%COMP%]{margin:0;color:#6c757d;font-size:.9rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.login-subtitle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--icon-mint)}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{text-align:left}.input-group[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;font-size:1.1rem;z-index:2;pointer-events:none}.input-group[_ngcontent-%COMP%]   .bi-envelope[_ngcontent-%COMP%]{color:var(--icon-blue)}.input-group[_ngcontent-%COMP%]   .bi-lock[_ngcontent-%COMP%]{color:var(--icon-orange)}.form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem .75rem .75rem 2.75rem;border:1px solid #ced4da;border-radius:8px;font-size:1rem;transition:border-color .3s ease,box-shadow .3s ease;background:#fff}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#80bdff;box-shadow:0 0 0 3px #007bff1a}.form-input.invalid[_ngcontent-%COMP%]{border-color:#dc3545}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:.75rem;border-radius:6px;border:1px solid #f5c6cb;font-size:.875rem;display:flex;align-items:center;gap:.5rem}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--icon-orange);font-size:1rem}.btn[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.login-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--icon-mint)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3;transform:translateY(-1px)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.login-help[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e9ecef;font-size:.85rem;color:#6c757d}.login-help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;display:flex;align-items:center;justify-content:center;gap:.5rem}.login-help[_ngcontent-%COMP%]   .bi-info-circle[_ngcontent-%COMP%]{color:var(--icon-blue)}.login-help[_ngcontent-%COMP%]   .bi-shield-check[_ngcontent-%COMP%]{color:var(--icon-green)}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:2rem 1.5rem;margin:1rem}.app-icon[_ngcontent-%COMP%]{font-size:2.5rem}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};export{A as LoginComponent};
